<?xml version="1.0"?>
<!DOCTYPE imprimatur PUBLIC 
    "-//Imprimatur DTD 008//EN"
    "http://imprimatur.sourceforge.net/imprimatur-008.dtd">
<imprimatur port="@@test.port@@" hostname="localhost">
	<test name="Look at home page">
		<request path="/">
			<response-code value="200" />
		</request>
	</test>
	<test name="Try logging in.">
		<!-- Look at log in page -->
		<request path="/log-in">
			<response-code value="200" />
		</request>
		<!-- Log in -->
		<request
			path="/_ah/login?email=test@example.com&amp;continue=http://localhost:@@test.port@@/&amp;action=Login"
			follow-redirects="true">
			<response-code value="200" />
		</request>
	</test>
	<test name="View the meter.">
		<request path="/meter?meter_key=aghtZXRlcmVhZHILCxIFTWV0ZXIYAgw">
			<regex
				pattern='&lt;a href="/_ah/login\?continue=http%3A//localhost%3A8080/&amp;action=Logout"&gt;Log Out&lt;/a&gt;' />
			<response-code value="200" />
		</request>
	</test>
	<test name="Insert a read.">
		<request path="/meter" method="post">
			<control name="meter_key" value="aghtZXRlcmVhZHILCxIFTWV0ZXIYAgw" />
			<control name="read_year" value="2011" />
			<control name="read_month" value="02" />
			<control name="read_day" value="13" />
			<control name="read_hour" value="17" />
			<control name="read_minute" value="48" />
			<control name="kwh" value="41" />
			<response-code value="200" />
		</request>
	</test>
	<test name="View the read read.">
		<request path="/read?read_key=aghtZXRlcmVhZHIKCxIEUmVhZBgDDA">
			<response-code value="200" />
			<regex pattern='&lt;legend&gt;Delete This Read&lt;/legend&gt;[\r\n]*&lt;input type="hidden" name="read_key" value="aghtZXRlcmVhZHIKCxIEUmVhZBgDDA"'/>
		</request>
	</test>
	<test name="Insert a read with a blank value.">
		<request path="/meter" method="post">
			<control name="meter_key" value="aghtZXRlcmVhZHILCxIFTWV0ZXIYAgw" />
			<control name="read_year" value="2011" />
			<control name="read_month" value="02" />
			<control name="read_day" value="13" />
			<control name="read_hour" value="18" />
			<control name="read_minute" value="48" />
			<control name="kwh" value="" />
			<response-code value="418" />
			<regex pattern="The field 'kwh' is needed\." />
		</request>
	</test>
	<test name="Delete a read.">
		<request path="/read" method="post">
			<control name="read_key" value="aghtZXRlcmVhZHIKCxIEUmVhZBgDDA"/>
			<control name="delete" value="Delete"/>
			<response-code value="303" />
		</request>
	</test>
</imprimatur>